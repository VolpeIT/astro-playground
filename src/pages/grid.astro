---
export const prerender = false
Astro.response.headers.set('Cache-Control', 'public, s-maxage=3600, stale-while-revalidate=3600');

import Layout from '../layouts/Layout.astro';
import { EdisonMarketCards } from '../components';
import { type AxiosResponse } from 'axios';
import { aResult, type Result } from '@volpe/utils';
import type { Course } from '../env';
import { api_qa } from "../utils/axios"
import { edisonMarketAdapter } from '../adapters/edisonMarketAdapter';

const ACADEMY_ID="2a748937-dfff-419c-908e-fa16856e19fe"
const [_err2, res2] = await api_qa.get[aResult](`/courses/market/${ACADEMY_ID}`) as Result<AxiosResponse<Course[]>>

if (res2 == null) throw new Error("no data")

const courses = res2.data
const adaptedCourses = courses.map(edisonMarketAdapter)

---

<Layout title="grid">
  <EdisonMarketCards courses={adaptedCourses}/>
</Layout>

